# 법령검색목록.csv × law.go.kr URL 규칙 검토 (백엔드 관점)

## 1. CSV 구조

| 컬럼 | 설명 | 비고 |
|------|------|------|
| 순번 | 1부터 시작 | |
| **법령MST** | 법령 마스터 일련번호 | **URL 생성 시 사용 가능** |
| 소관부처코드 | 7자리 | |
| 소관부처명 | 한글 | |
| **법령ID** | 6자리 (예: 001592) | law.go.kr 일부 API의 `lsId`와 혼용 가능성 있음 |
| **법령명** | 한글 (예: 공인회계사법) | 매칭 키로 사용 |
| 공포일자, 공포번호, 시행일자 | YYYYMMDD 등 | |
| 법령구분코드/명 | A0002=법률, A0007=대통령령 등 | |
| 법령분야코드/명 | 분류용 | |

- **URL 컬럼은 없음.** 법령MST·법령ID·법령명만으로 URL을 조합해야 함.

---

## 2. law.go.kr 공식 URL 규칙 (매칭 여부)

### 2.1 법령 본문 (전체)

- **공식 형식**: `https://www.law.go.kr/LSW/lsInfoP.do?lsiSeq={법령일련번호}`
- **CSV와의 매칭**: 검색 결과에서 **공인회계사법 시행령**이 `lsiSeq=271153`으로 노출됨. CSV 동일 법령의 **법령MST=271153**과 일치.
- **결론**: **법령 본문 URL은 `lsiSeq`에 CSV의 `법령MST`를 쓰면 됨.**

```
https://www.law.go.kr/LSW/lsInfoP.do?lsiSeq=258791   ← 공인회계사법 (CSV 법령MST=258791)
https://www.law.go.kr/LSW/lsInfoP.do?lsiSeq=271153   ← 공인회계사법 시행령
https://www.law.go.kr/LSW/lsInfoP.do?lsiSeq=273111   ← 공인회계사법 시행규칙
```

### 2.2 조문별 링크 (제21조 등)

- **공식 형식**: `https://www.law.go.kr/lsLawLinkInfo.do?chrClsCd=...&lsId=...&lsJoLnkSeq=...`
- **CSV**: **조문 일련번호(lsJoLnkSeq), chrClsCd, 조문별 lsId 없음.** 법령 단위 정보만 있음.
- **결론**: **현재 CSV만으로는 “공인회계사법 제21조”처럼 조문 단위 URL을 만들 수 없음.**  
  → “제21조” 등이 있어도 해당 **법령 본문(lsiSeq=법령MST)** 으로 연결하는 것이 현실적.

### 2.3 한글 경로 형식 (`/법령/공인회계사법/제21조`)

- 현재 백엔드 하드코딩: `https://www.law.go.kr/법령/공인회계사법/제21조` 등.
- 공식 문서/검색 결과에서는 **쿼리 형식(lsInfoP.do?lsiSeq=, lsLawLinkInfo.do?…)** 이 주로 확인됨. 한글 경로는 리다이렉트이거나 일부 페이지만 지원할 수 있음.
- **결론**: **URL 규칙을 CSV·공식 형식에 맞추려면 한글 경로 대신 `lsInfoP.do?lsiSeq={법령MST}` 사용을 권장.**

---

## 3. 현재 백엔드와의 불일치 요약

| 항목 | 현재 방식 | CSV/공식 규칙과 비교 |
|------|-----------|----------------------|
| URL 형식 | 한글 경로 `/법령/공인회계사법/제21조` | 공식은 `lsInfoP.do?lsiSeq=법령MST` 권장 |
| 매핑 키 | 법령명 문자열 하드코딩 | CSV는 법령명+법령MST 제공 → 법령MST로 URL 생성 가능 |
| 조문 | “제21조” 포함 URL 시도 | CSV에 조문 정보 없음 → 법령 본문으로만 링크 가능 |
| 법령 목록 | 소수 수동 등록 | CSV 5556건 로드 시 법령명→법령MST 매핑으로 확장 가능 |

---

## 4. 권장 조치

1. **URL 규칙 통일**  
   - 법령 링크는 **`https://www.law.go.kr/LSW/lsInfoP.do?lsiSeq={법령MST}`** 로 생성.
2. **CSV 활용**  
   - `법령검색목록.csv`를 로드해 `법령명` → `법령MST` 매핑 테이블 구성.  
   - LLM이 반환한 법령명(또는 정규화한 문자열)으로 매핑 테이블 조회 후 `lsiSeq=법령MST` URL 생성.
3. **조문 표기(“제21조” 등)**  
   - 표시 문구는 그대로 두고, **링크만 해당 법령 본문(법령MST)** 으로 연결.  
   - 추후 조문별 lsJoLnkSeq 등이 확보되면 그때 조문 단위 URL 도입 검토.
4. **법령명 정규화**  
   - CSV 법령명은 “공인회계사법”, “공인회계사법 시행령”, “주식회사 등의 외부감사에 관한 법률” 등.  
   - LLM 출력은 “공인회계사법 제21조”, “외부감사법” 등 다양하므로, **법령명 부분만 추출해 CSV와 매칭**(예: “공인회계사법 제21조” → “공인회계사법”)하는 로직이 필요.

이후 단계로 CSV 로더와 `법령명 → lsiSeq` 매핑을 백엔드에 넣고, 기존 `_LAW_URL_MAP`을 이 규칙으로 대체하면 됨.
